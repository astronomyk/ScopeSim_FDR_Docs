\documentclass[a4paper,twoside,11pt]{report}

\usepackage[a4paper, total={17cm, 24cm}]{geometry}
% generated by Docutils <http://docutils.sourceforge.net/>
\usepackage{cmap} % fix search and cut-and-paste in Acrobat
\usepackage{ifthen}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\setcounter{secnumdepth}{3}
\usepackage{longtable,ltcaption,array}
\setlength{\extrarowheight}{2pt}
\newlength{\DUtablewidth} % internal use in tables

\usepackage[parfill]{parskip}

%%% Custom LaTeX preamble
% PDF Standard Fonts
\usepackage[scaled=.90]{helvet}
\usepackage{courier}
\usepackage{graphicx}
\graphicspath{{images/}}
\setkeys{Gin}{width=\textwidth}
\usepackage{alltt}
\usepackage{float}
\usepackage{listings}
\lstloadlanguages{csh, python}
\usepackage{pdfpages}

%%% MICADO PDR doc packages
\usepackage{dmd-doc}
\usepackage[english]{babel}
\usepackage{multirow}
\usepackage{supertabular}
\usepackage{amsmath}
\usepackage{color}
\definecolor{darkblue}{rgb}{0, 0, 0.5}
\definecolor{listingbg}{gray}{0.95}


%%% User specified packages and stylesheets


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Docutils-specific commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% admonition (specially marked topic)
\providecommand{\DUadmonition}[2][class-arg]{%
  % try \DUadmonition#1{#2}:
  \ifcsname DUadmonition#1\endcsname%
    \csname DUadmonition#1\endcsname{#2}%
  \else
    \begin{center}
      \fbox{\parbox{0.9\linewidth}{#2}}
    \end{center}
  \fi
}

% class handling for environments (block-level elements)
% \begin{DUclass}{spam} tries \DUCLASSspam and
% \end{DUclass}{spam} tries \endDUCLASSspam
\ifx\DUclass\undefined % poor man's "provideenvironment"
 \newenvironment{DUclass}[1]%
  {\def\DocutilsClassFunctionName{DUCLASS#1}% arg cannot be used in end-part of environment.
     \csname \DocutilsClassFunctionName \endcsname}%
  {\csname end\DocutilsClassFunctionName \endcsname}%
\fi

% subtitle (in document title)
\providecommand*{\DUdocumentsubtitle}[1]{{\large #1}}

% title for topics, admonitions, unsupported section levels, and sidebar
\providecommand*{\DUtitle}[2][class-arg]{%
  % call \DUtitle#1{#2} if it exists:
  \ifcsname DUtitle#1\endcsname%
    \csname DUtitle#1\endcsname{#2}%
  \else
    \smallskip\noindent\textbf{#2}\smallskip%
  \fi
}

% hyperlinks:
\ifthenelse{\isundefined{\hypersetup}}{
  \usepackage[colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}
  \usepackage{bookmark}
  \urlstyle{same} % normal text font (alternatives: tt, rm, sf)
}{}
\hypersetup{
  pdftitle={ScopeSim instrument packages for MICADO},
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Set title values
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\dmdTitle{ScopeSim instrument packages for MICADO}
\dmdDocId{ELT-TRE-MCD-56306-0059}
\dmdIssue{1.0}
\dmdDate{12. April 2021}
\dmdPreparedBy{K. Leschinski, O. Czoske, M. Verdugo}
\dmdPreparedOn{2021-12-04}
\dmdPreparedSig{\resizebox{2.5cm}{!}{\includegraphics{scribble}}}
\dmdApprovedBy{}
\dmdApprovedOn{}
\dmdApprovedSig{}
\dmdReleasedBy{}
\dmdReleasedOn{}
\dmdReleasedSig{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Body
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

% listings style
\lstset{basicstyle=\ttfamily,
  % columns=flexible,
  frame=single,
  backgroundcolor=\color{listingbg},
  captionpos=b,
  showspaces=false}

\dmdmaketitle

%\emptypage{This page was intentionally left blank}

\begin{center}
  \textbf{Change record}

  \tablehead{\hline
    \multicolumn{1}{|c|}{Issue/Rev.} &
    \multicolumn{1}{|c|}{Date} &
    \multicolumn{1}{|c|}{Section/Parag.\ affected} &
    \multicolumn{1}{|c|}{Reason/Initiation/Documents/Remarks} \\
    \hline}
  \tabletail{\hline}

  \begin{supertabular}{|l|l|l|l|}
   0.1 & 2020-10-15 & All & (KL) Layout initialised \\
   0.2 & 2020-12-04 & All & (KL) Added new data, tables, plots to all sections \\
   1.0 & 2021-04-12 & All & (KL) Minor corrections \\
   \hline
  \end{supertabular}

\end{center}

%\emptypage{This page was unintentionally left blank}

\setcounter{tocdepth}{3}
\tableofcontents
\cleardoublepage


\chapter{Introduction}

\section{Applicable Documents}

\begin{center}
  \tablehead{\hline
    \multicolumn{1}{|c|}{Nr} &
    \multicolumn{1}{|c|}{Doc.\ Nr} &
    \multicolumn{1}{|c|}{Doc.\ Title} &
    \multicolumn{1}{|c|}{Issue} &
    \multicolumn{1}{|c|}{Date} \\
    \hline}
  \tabletail{\hline}

  \begin{supertabular}{|l|l|l|c|l|}
    AD\,1 & ELT-MAN-MCD-56306-0058 & SimCADO User Manual & 1.0 & 2021-04-12 \\
    AD\,2 & ELT-TRE-MCD-56306-0060 & ScopeSim - A modular astronomical & & \\
    & & instrument data simulation environment & 1.0 & 2021-04-12 \\
    AD\,3 & ELT-TRE-MCD-56300-0014 & MICADO Masks, Stops, and Filters Description & 2.9 & 2020-12-04 \\
  \end{supertabular}
\end{center}



\input{tex/0_introduction}

\chapter{MICADO Pipeline package}

\input{tex/pipe_summary}
\input{tex/pipe_MICADO}
\input{tex/pipe_MICADO_IMG_LR}
\input{tex/pipe_MICADO_IMG_HR}
\input{tex/pipe_MICADO_SPEC}
\input{tex/pipe_micado_detector_array}
\input{tex/pipe_MICADO_simulation_paramters}

\chapter{MICADO Science package}

\input{tex/sci_summary}
\input{tex/sci_MICADO_Sci}
\input{tex/sci_SCAO}
\input{tex/sci_MICADO_SCAO}
\input{tex/sci_MICADO_Sci_SCAO_detector_override}
\input{tex/sci_MCAO}
\input{tex/sci_MICADO_MCAO}
\input{tex/sci_MICADO_Sci_MCAO_detector_override}
\input{tex/sci_SPEC}
\input{tex/sci_MICADO_SPEC}
\input{tex/sci_MICADO_Sci_SPEC_detector_override}
\input{tex/sci_4mas}
\input{tex/sci_1}
\input{tex/sci_micado_sci_detector}

\chapter{Support packages}

\input{tex/pipe_armazones}
\input{tex/pipe_ELT}
\input{tex/pipe_MAORY}
\input{tex/pipe_default_ro}


\end{document}
