\documentclass[a4paper,11pt]{article}

\usepackage[a4paper, total={17cm, 24cm}]{geometry}
% generated by Docutils <http://docutils.sourceforge.net/>
\usepackage{cmap} % fix search and cut-and-paste in Acrobat
\usepackage{ifthen}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\setcounter{secnumdepth}{3}
\usepackage{longtable,ltcaption,array}
\setlength{\extrarowheight}{2pt}
\newlength{\DUtablewidth} % internal use in tables

\usepackage[parfill]{parskip}


\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty = 10000

%%% Custom LaTeX preamble
% PDF Standard Fonts
\usepackage[scaled=.90]{helvet}
\usepackage{courier}
\usepackage{upgreek}         % to make pretty microns
\usepackage{graphicx}
\graphicspath{{images/}}
\setkeys{Gin}{width=\textwidth}
\usepackage{alltt}
\usepackage{float}
\usepackage{listings}
\lstloadlanguages{csh, python}

%%% MICADO PDR doc packages
\usepackage{dmd-doc}
\usepackage[english]{babel}
\usepackage{multirow}
\usepackage{tabularx}
\usepackage{supertabular}
\usepackage{amsmath}
\usepackage{color}
\definecolor{darkblue}{rgb}{0, 0, 0.5}
\definecolor{listingbg}{gray}{0.95}


%%% User specified packages and stylesheets
%% Degrees, arcmin, arcsec
\def\degr{\hbox{$\,^\circ$}}
\def\arcmin{\hbox{$\,^\prime$}}
\def\arcsec{\hbox{$\,^{\prime\prime}$}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Docutils-specific commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% admonition (specially marked topic)
\providecommand{\DUadmonition}[2][class-arg]{%
  % try \DUadmonition#1{#2}:
  \ifcsname DUadmonition#1\endcsname%
    \csname DUadmonition#1\endcsname{#2}%
  \else
    \begin{center}
      \fbox{\parbox{0.9\linewidth}{#2}}
    \end{center}
  \fi
}

% class handling for environments (block-level elements)
% \begin{DUclass}{spam} tries \DUCLASSspam and
% \end{DUclass}{spam} tries \endDUCLASSspam
\ifx\DUclass\undefined % poor man's "provideenvironment"
 \newenvironment{DUclass}[1]%
  {\def\DocutilsClassFunctionName{DUCLASS#1}% arg cannot be used in end-part of environment.
     \csname \DocutilsClassFunctionName \endcsname}%
  {\csname end\DocutilsClassFunctionName \endcsname}%
\fi

% subtitle (in document title)
\providecommand*{\DUdocumentsubtitle}[1]{{\large #1}}

% title for topics, admonitions, unsupported section levels, and sidebar
\providecommand*{\DUtitle}[2][class-arg]{%
  % call \DUtitle#1{#2} if it exists:
  \ifcsname DUtitle#1\endcsname%
    \csname DUtitle#1\endcsname{#2}%
  \else
    \smallskip\noindent\textbf{#2}\smallskip%
  \fi
}

% hyperlinks:
\ifthenelse{\isundefined{\hypersetup}}{
  \usepackage[colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}
  \usepackage{bookmark}
  \urlstyle{same} % normal text font (alternatives: tt, rm, sf)
}{}
\hypersetup{
  pdftitle={ScopeSim Overview},
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Set title values
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\dmdTitle{ScopeSim \\ A flexible astronomical instrument data simulation environment}
\dmdDocId{ELT-TRE-MCD-56306-0060}
\dmdIssue{1.0}
\dmdDate{04. December 2020}
\dmdPreparedBy{K. Leschinski, O. Czoske, M. Verdugo}
\dmdPreparedOn{2020-12-04}
\dmdPreparedSig{\resizebox{2.5cm}{!}{\includegraphics{scribble}}}
\dmdApprovedBy{}
\dmdApprovedOn{}
\dmdApprovedSig{}
\dmdReleasedBy{}
\dmdReleasedOn{}
\dmdReleasedSig{}

%%% convenience commands
\newcommand{\ScopeSim}{\lstinline{ScopeSim}}
\newcommand{\scopesim}{\lstinline{ScopeSim}}
\newcommand{\ScopeSimtemplates}{\lstinline{ScopeSim_templates}}
\newcommand{\scopesimtemplates}{\lstinline{scopeSim_templates}}
\newcommand{\IRDB}{\lstinline{IRDB}}
\newcommand{\irdb}{\lstinline{IRDB}}
\newcommand{\Effect}{\lstinline{Effect}}
\newcommand{\Source}{\lstinline{Source}}
\newcommand{\FieldOfView}{\lstinline{FieldOfView}}
\newcommand{\Detector}{\lstinline{Detector}}
\newcommand{\DetectorArray}{\lstinline{DetectorArray}}
\newcommand{\ImagePlane}{\lstinline{ImagePlane}}
\newcommand{\micron}{\upmu\mathrm{m}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Body
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Body
\begin{document}

% listings style
\lstset{basicstyle=\ttfamily,
  %columns=flexible,
  frame=single,
  backgroundcolor=\color{listingbg},
  captionpos=b,
  showspaces=false}

\dmdmaketitle


%\emptypage{This page was intentionally left blank}

\begin{center}
  \textbf{Change record}

  \tablehead{\hline
    \multicolumn{1}{|c|}{Issue/Rev.} &
    \multicolumn{1}{|c|}{Date} &
    \multicolumn{1}{|c|}{Section/Parag.\ affected} &
    \multicolumn{1}{|c|}{Reason/Initiation/Documents/Remarks} \\
    \hline}
  \tabletail{\hline}

  \begin{supertabular}{|l|l|l|l|}
   0.0.1 & 2020-10-15 & All & Layout initialised \\
   0.0.2 & 2020-12-04 & All & Added contents of Leschinski et al. (2020) \\
   \hline
  \end{supertabular}

\end{center}

\begin{center}
  \textbf{Relevant Documents}

  \tablehead{\hline
    \multicolumn{1}{|c|}{Ref. No.} &
    \multicolumn{1}{|c|}{Title} \\
    \hline}
  \tabletail{\hline}

  \begin{supertabular}{|l|l|l|l|}
   ELT-TRE-MCD-56306-0058 & SimCADO v2 User Manual \\
   ELT-TRE-MCD-56306-0059 & ScopeSim instrument packages for MICADO \\
   \hline
  \end{supertabular}

\end{center}

\begin{figure}

\resizebox{\linewidth}{!}{\includegraphics{massive_image.png}}
\caption{A simulated 1-hour 30-arcsecond windowed observation with
  MICADO in K-band of a ficticious region of the sky containing Saturn
  (centre) at opposition, Vesta at conjunction (centre right), the
  nearby galaxies M\,104 (top left) and M\,51 (bottom right), a
  distant galaxy cluster (top right), a 10.000~$M_{\odot}$ R136-style
  young massive cluster in the LMC (bottom left), and $\sim 1000$
  Milky Way field stars.  The sizes of Saturn, Vesta, and the YMC are
  all true to scale.  M\,104 and M\,51 have been rescaled to fit
  inside the image.  The surface brightness of all objects (except for
  the YMC and field stars) were scaled such that they would not
  saturate the MICADO detectors.  The image was created using a
  combination of functions from ScopeSim, ScopeSim\_templates, and
  custom code.  The PSF used was an ideal-case on-axis Ks-band SCAO
  PSF generated on-the-fly using the AnisoCADO package with a Strehl
  ratio of 82\%.  Execution time was $\sim 30$ seconds for the
  $8092\times8092$ image.  }
\label{fig-title-page}

\end{figure}

\cleardoublepage

\emptypage{This page was unintentionally left blank}

\setcounter{tocdepth}{3}
\tableofcontents
\cleardoublepage

\input{spie_tex/A_abstract}
\input{spie_tex/1_intro}
\input{spie_tex/2_examples}
\input{spie_tex/4_scopesim_architecture}
\input{spie_tex/3_building_blocks}

\end{document}
